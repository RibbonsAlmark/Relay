{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
    <div style="line-height: 1.8;">
        <p style="margin: 5px 0;"><strong>目标集合:</strong> <code style="color: #e67e22;">{{ col }}</code></p>
        <p style="margin: 5px 0;"><strong>所属数据库:</strong> {{ db }}</p>
        <p style="margin: 5px 0;"><strong>设定评级:</strong> 
            <span style="background: {{ color }}; color: white; padding: 2px 8px; border-radius: 4px; font-weight: bold;">
                {{ score }}
            </span>
        </p>
        <hr style="border: none; border-top: 1px solid #eee; margin: 15px 0;">
        <p style="margin: 5px 0; font-size: 1.1em;">
            <strong>受影响帧数:</strong> 
            <span style="color: #2980b9; font-weight: bold;">{{ processed_count }}</span>
        </p>
    </div>
    <script>
        (function() {
            try {
                const targets = [];
                if (window.opener) {
                    targets.push(window.opener);
                    try {
                        if (window.opener.top && window.opener.top !== window.opener) {
                            targets.push(window.opener.top);
                        }
                    } catch (e) {}
                }
                
                if (targets.length > 0) {
                    targets.forEach(t => {
                        t.postMessage({
                            type: "RERUN_RATING_COMPLETE",
                            recording_uuid: "{{ recording_uuid }}"
                        }, "*");
                    });
                }
            } catch (e) {}
        })();
    </script>
{% endblock %}